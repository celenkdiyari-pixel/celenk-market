module.exports=[29881,a=>{"use strict";a.s(["default",()=>v]);var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(91119),f=a.i(86304),g=a.i(66718),h=a.i(83497),i=a.i(87532),j=a.i(77156),k=a.i(16201),l=a.i(62722),m=a.i(41710),n=a.i(10227),o=a.i(46842),p=a.i(63519),q=a.i(92258),r=a.i(41675),s=a.i(11156),t=a.i(69012),u=a.i(71987);function v(){let[a,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("all"),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1);(0,c.useEffect)(()=>{G()},[]);let G=async()=>{try{x(!0);let a=await fetch("/api/orders");if(a.ok){let b=await a.json();v(b.orders||[])}else console.error("Failed to load orders")}catch(a){console.error("Error loading orders:",a)}finally{x(!1)}},H=async(a,b)=>{try{(await fetch(`/api/orders/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok?(v(c=>c.map(c=>c.id===a?{...c,status:b}:c)),C&&C.id===a&&D(a=>a?{...a,status:b}:null)):alert("Sipariş durumu güncellenirken hata oluştu")}catch(a){console.error("Error updating order status:",a),alert("Sipariş durumu güncellenirken hata oluştu")}},I=a=>{let c={pending:{label:"Beklemede",color:"bg-yellow-100 text-yellow-800",icon:m.Clock},confirmed:{label:"Onaylandı",color:"bg-blue-100 text-blue-800",icon:k.CheckCircle},preparing:{label:"Hazırlanıyor",color:"bg-orange-100 text-orange-800",icon:h.Package},shipped:{label:"Kargoya Verildi",color:"bg-purple-100 text-purple-800",icon:n.Truck},delivered:{label:"Teslim Edildi",color:"bg-green-100 text-green-800",icon:k.CheckCircle},cancelled:{label:"İptal Edildi",color:"bg-red-100 text-red-800",icon:l.XCircle}},d=c[a]||c.pending,e=d.icon;return(0,b.jsxs)(f.Badge,{className:`${d.color} border-0`,children:[(0,b.jsx)(e,{className:"h-3 w-3 mr-1"}),d.label]})},J=a=>{let c={pending:{label:"Beklemede",color:"bg-yellow-100 text-yellow-800"},paid:{label:"Ödendi",color:"bg-green-100 text-green-800"},failed:{label:"Başarısız",color:"bg-red-100 text-red-800"},refunded:{label:"İade Edildi",color:"bg-gray-100 text-gray-800"}},d=c[a]||c.pending;return(0,b.jsx)(f.Badge,{className:`${d.color} border-0`,children:d.label})},K=a.filter(a=>{let b=a.orderNumber.toLowerCase().includes(y.toLowerCase())||a.customer.firstName.toLowerCase().includes(y.toLowerCase())||a.customer.lastName.toLowerCase().includes(y.toLowerCase())||a.customer.email.toLowerCase().includes(y.toLowerCase()),c="all"===A||a.status===A;return b&&c});return w?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sipariş Yönetimi"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Tüm siparişleri görüntüleyin ve yönetin"})]}),(0,b.jsx)(e.Card,{className:"mb-6",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(g.Input,{placeholder:"Sipariş numarası, müşteri adı veya e-posta ile ara...",value:y,onChange:a=>z(a.target.value),className:"pl-10 rounded-xl"})]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(t.Filter,{className:"h-4 w-4 text-gray-400"}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,b.jsx)("option",{value:"all",children:"Tüm Durumlar"}),(0,b.jsx)("option",{value:"pending",children:"Beklemede"}),(0,b.jsx)("option",{value:"confirmed",children:"Onaylandı"}),(0,b.jsx)("option",{value:"preparing",children:"Hazırlanıyor"}),(0,b.jsx)("option",{value:"shipped",children:"Kargoya Verildi"}),(0,b.jsx)("option",{value:"delivered",children:"Teslim Edildi"}),(0,b.jsx)("option",{value:"cancelled",children:"İptal Edildi"})]})]})]})})}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-6",children:0===K.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)(h.Package,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sipariş Bulunamadı"}),(0,b.jsx)("p",{className:"text-gray-500",children:y||"all"!==A?"Arama kriterlerinize uygun sipariş bulunamadı.":"Henüz hiç sipariş alınmamış."})]})}):K.map(a=>(0,b.jsx)(e.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["#",a.orderNumber]}),I(a.status),J(a.paymentStatus)]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(o.User,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.customer.firstName," ",a.customer.lastName]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(q.Mail,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.customer.email})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(p.Phone,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.customer.phone})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(r.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString("tr-TR")})]})]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,b.jsx)(h.Package,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.items.length," ürün"]}),(0,b.jsx)("span",{className:"mx-2",children:"•"}),(0,b.jsx)(s.CreditCard,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"capitalize",children:"cash"===a.paymentMethod?"Kapıda Ödeme":"credit_card"===a.paymentMethod?"Kredi Kartı":"Havale/EFT"})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end space-y-3",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[a.total.toFixed(2)," ₺"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Kargo: ",a.shippingCost.toFixed(2)," ₺"]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{D(a),F(!0)},children:[(0,b.jsx)(j.Eye,{className:"h-4 w-4 mr-1"}),"Detay"]}),"pending"===a.status&&(0,b.jsx)(d.Button,{size:"sm",onClick:()=>H(a.id,"confirmed"),className:"bg-green-600 hover:bg-green-700",children:"Onayla"}),"confirmed"===a.status&&(0,b.jsx)(d.Button,{size:"sm",onClick:()=>H(a.id,"preparing"),className:"bg-blue-600 hover:bg-blue-700",children:"Hazırla"}),"preparing"===a.status&&(0,b.jsx)(d.Button,{size:"sm",onClick:()=>H(a.id,"shipped"),className:"bg-purple-600 hover:bg-purple-700",children:"Kargoya Ver"})]})]})]})})},a.id))})]})}),E&&C&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsx)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Sipariş Detayı - #",C.orderNumber]}),(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>F(!1),children:"Kapat"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(o.User,{className:"h-5 w-5 mr-2"}),"Müşteri Bilgileri"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Ad Soyad"}),(0,b.jsxs)("p",{className:"text-gray-900",children:[C.customer.firstName," ",C.customer.lastName]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"E-posta"}),(0,b.jsx)("p",{className:"text-gray-900",children:C.customer.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Telefon"}),(0,b.jsx)("p",{className:"text-gray-900",children:C.customer.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Adres"}),(0,b.jsxs)("p",{className:"text-gray-900",children:[C.customer.address.street,(0,b.jsx)("br",{}),C.customer.address.district,", ",C.customer.address.city,(0,b.jsx)("br",{}),C.customer.address.postalCode," ",C.customer.address.country]})]}),C.customer.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Notlar"}),(0,b.jsx)("p",{className:"text-gray-900",children:C.customer.notes})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(h.Package,{className:"h-5 w-5 mr-2"}),"Sipariş Bilgileri"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Durum:"}),I(C.status)]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Ödeme Durumu:"}),J(C.paymentStatus)]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Ödeme Yöntemi:"}),(0,b.jsx)("span",{className:"capitalize",children:"cash"===C.paymentMethod?"Kapıda Ödeme":"credit_card"===C.paymentMethod?"Kredi Kartı":"Havale/EFT"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Teslimat:"}),(0,b.jsx)("span",{className:"capitalize",children:"standard"===C.shippingMethod?"Standart":"express"===C.shippingMethod?"Hızlı":"Mağazadan Teslim"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Sipariş Tarihi:"}),(0,b.jsx)("span",{children:new Date(C.createdAt).toLocaleString("tr-TR")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Son Güncelleme:"}),(0,b.jsx)("span",{children:new Date(C.updatedAt).toLocaleString("tr-TR")})]})]})]})]}),(0,b.jsxs)(e.Card,{className:"mt-6",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Sipariş Ürünleri"})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"space-y-4",children:C.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[(0,b.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100",children:a.image?(0,b.jsx)(u.default,{src:a.image,alt:a.productName,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(h.Package,{className:"h-8 w-8 text-gray-400"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.productName}),a.variantName&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.variantName}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Adet: ",a.quantity]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-medium text-gray-900",children:[(a.price*a.quantity).toFixed(2)," ₺"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.price.toFixed(2)," ₺ / adet"]})]})]},c))}),(0,b.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,b.jsx)("span",{children:"Ara Toplam:"}),(0,b.jsxs)("span",{children:[C.subtotal.toFixed(2)," ₺"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,b.jsx)("span",{children:"Kargo:"}),(0,b.jsxs)("span",{children:[C.shippingCost.toFixed(2)," ₺"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,b.jsx)("span",{children:"Toplam:"}),(0,b.jsxs)("span",{className:"text-green-600",children:[C.total.toFixed(2)," ₺"]})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:["pending"===C.status&&(0,b.jsx)(d.Button,{onClick:()=>{H(C.id,"confirmed"),F(!1)},className:"bg-green-600 hover:bg-green-700",children:"Siparişi Onayla"}),"confirmed"===C.status&&(0,b.jsx)(d.Button,{onClick:()=>{H(C.id,"preparing"),F(!1)},className:"bg-blue-600 hover:bg-blue-700",children:"Hazırlamaya Başla"}),"preparing"===C.status&&(0,b.jsx)(d.Button,{onClick:()=>{H(C.id,"shipped"),F(!1)},className:"bg-purple-600 hover:bg-purple-700",children:"Kargoya Ver"}),"shipped"===C.status&&(0,b.jsx)(d.Button,{onClick:()=>{H(C.id,"delivered"),F(!1)},className:"bg-green-600 hover:bg-green-700",children:"Teslim Edildi Olarak İşaretle"})]})]})})})]})}}];

//# sourceMappingURL=src_app_adminpanel_orders_page_tsx_c7de2721._.js.map