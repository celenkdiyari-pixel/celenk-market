module.exports=[94894,a=>{"use strict";a.s(["default",()=>q]);var b=a.i(87924),c=a.i(72131),d=a.i(35911),e=a.i(99570),f=a.i(66718),g=a.i(91119),h=a.i(38784),i=a.i(46842),j=a.i(24987),k=a.i(11156),l=a.i(10227),m=a.i(16201),n=a.i(210),o=a.i(38246),p=a.i(71987);function q(){let{cartItems:a,clearCart:q}=(0,d.useCart)(),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({firstName:"",lastName:"",email:"",phone:"",address:{street:"",city:"",district:"",postalCode:"",country:"Türkiye"},notes:""}),[z,A]=(0,c.useState)("cash"),[B,C]=(0,c.useState)("standard"),D=a.reduce((a,b)=>a+b.price*b.quantity,0),E="express"===B?50:25*("pickup"!==B),F=D+E,G=async b=>{if(b.preventDefault(),0===a.length)return void alert("Sepetinizde ürün bulunmuyor");if(!x.firstName||!x.lastName||!x.email||!x.phone)return void alert("Lütfen tüm kişisel bilgilerinizi doldurun");if(!x.address.street||!x.address.city||!x.address.district)return void alert("Lütfen adres bilgilerinizi tam olarak doldurun (Sokak, Şehir, İlçe zorunludur)");s(!0);try{let b={customer:x,items:a.map(a=>({productId:a.id,productName:a.name,variantId:a.variantId,variantName:a.variantName,quantity:a.quantity,price:a.price,image:a.image})),subtotal:D,shippingCost:E,total:F,paymentMethod:z,shippingMethod:B,notes:x.notes},c=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json();alert("Sipariş oluşturulurken hata oluştu: "+a.error);return}let d=await c.json();if(w(d.orderNumber),"cash"===z)u(!0),q();else if("credit_card"===z)try{let a=await fetch("/api/payments/paytr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,orderNumber:d.orderNumber})});if(a.ok){let b=await a.json();b.success?window.location.href=b.iframeUrl:alert("Ödeme işlemi başlatılamadı: "+b.error)}else{let b=await a.json();"PayTR configuration pending"===b.message?(u(!0),q()):alert("Ödeme işlemi başlatılamadı: "+b.error)}}catch(a){console.error("Payment error:",a),alert("Ödeme işlemi başlatılamadı")}else"bank_transfer"===z&&(u(!0),q())}catch(a){console.error("Error creating order:",a),alert("Sipariş oluşturulurken hata oluştu")}finally{s(!1)}};return 0!==a.length||t?t?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,b.jsx)(g.Card,{className:"w-full max-w-md text-center",children:(0,b.jsxs)(g.CardContent,{className:"pt-6",children:[(0,b.jsx)(m.CheckCircle,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Siparişiniz Alındı!"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-4",children:["Sipariş numaranız: ",(0,b.jsx)("span",{className:"font-bold text-green-600",children:v})]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Siparişiniz en kısa sürede hazırlanacak ve size ulaştırılacaktır."}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.default,{href:"/",children:(0,b.jsx)(e.Button,{className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Ana Sayfaya Dön"})}),(0,b.jsx)(o.default,{href:"/products",children:(0,b.jsx)(e.Button,{variant:"outline",className:"w-full",children:"Alışverişe Devam Et"})})]})]})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(o.default,{href:"/cart",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"mb-4",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Sepete Dön"]})}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipariş Ver"})]}),(0,b.jsxs)("form",{onSubmit:G,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(i.User,{className:"h-5 w-5 mr-2"}),"Kişisel Bilgiler"]})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad *"}),(0,b.jsx)(f.Input,{value:x.firstName,onChange:a=>y(b=>({...b,firstName:a.target.value})),required:!0,className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soyad *"}),(0,b.jsx)(f.Input,{value:x.lastName,onChange:a=>y(b=>({...b,lastName:a.target.value})),required:!0,className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta *"}),(0,b.jsx)(f.Input,{type:"email",value:x.email,onChange:a=>y(b=>({...b,email:a.target.value})),required:!0,className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon *"}),(0,b.jsx)(f.Input,{type:"tel",value:x.phone,onChange:a=>y(b=>({...b,phone:a.target.value})),required:!0,className:"rounded-xl"})]})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(j.MapPin,{className:"h-5 w-5 mr-2"}),"Adres Bilgileri"]})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres *"}),(0,b.jsx)(f.Input,{value:x.address.street,onChange:a=>y(b=>({...b,address:{...b.address,street:a.target.value}})),required:!0,className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İl *"}),(0,b.jsx)(f.Input,{value:x.address.city,onChange:a=>y(b=>({...b,address:{...b.address,city:a.target.value}})),required:!0,className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İlçe *"}),(0,b.jsx)(f.Input,{value:x.address.district,onChange:a=>y(b=>({...b,address:{...b.address,district:a.target.value}})),required:!0,className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Posta Kodu"}),(0,b.jsx)(f.Input,{value:x.address.postalCode,onChange:a=>y(b=>({...b,address:{...b.address,postalCode:a.target.value}})),className:"rounded-xl"})]})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(k.CreditCard,{className:"h-5 w-5 mr-2"}),"Ödeme Yöntemi"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:[{value:"cash",label:"Kapıda Ödeme",desc:"Teslimat sırasında nakit ödeme"},{value:"credit_card",label:"Kredi Kartı",desc:"Güvenli online ödeme"},{value:"bank_transfer",label:"Havale/EFT",desc:"Banka havalesi ile ödeme"}].map(a=>(0,b.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,b.jsx)("input",{type:"radio",name:"paymentMethod",value:a.value,checked:z===a.value,onChange:a=>A(a.target.value),className:"text-green-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.label}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.desc})]})]},a.value))})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(l.Truck,{className:"h-5 w-5 mr-2"}),"Teslimat Yöntemi"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:[{value:"standard",label:"Standart Teslimat",desc:"2-3 iş günü",cost:"25 ₺"},{value:"express",label:"Hızlı Teslimat",desc:"1 iş günü",cost:"50 ₺"},{value:"pickup",label:"Mağazadan Teslim",desc:"Ücretsiz",cost:"Ücretsiz"}].map(a=>(0,b.jsxs)("label",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("input",{type:"radio",name:"shippingMethod",value:a.value,checked:B===a.value,onChange:a=>C(a.target.value),className:"text-green-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.label}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.desc})]})]}),(0,b.jsx)("div",{className:"font-medium text-green-600",children:a.cost})]},a.value))})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Özel Notlar"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("textarea",{value:x.notes,onChange:a=>y(b=>({...b,notes:a.target.value})),placeholder:"Siparişinizle ilgili özel notlarınızı buraya yazabilirsiniz...",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3})})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)(g.Card,{className:"sticky top-4",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Sipariş Özeti"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-gray-100",children:a.image?(0,b.jsx)(p.default,{src:a.image,alt:a.name,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(h.ShoppingCart,{className:"h-6 w-6 text-gray-400"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),a.variantName&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.variantName}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Adet: ",a.quantity]})]}),(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(a.price*a.quantity).toFixed(2)," ₺"]})]},`${a.id}-${a.variantId||"default"}`))}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Ara Toplam:"}),(0,b.jsxs)("span",{children:[D.toFixed(2)," ₺"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Kargo:"}),(0,b.jsxs)("span",{children:[E.toFixed(2)," ₺"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,b.jsx)("span",{children:"Toplam:"}),(0,b.jsxs)("span",{className:"text-green-600",children:[F.toFixed(2)," ₺"]})]})]}),(0,b.jsx)(e.Button,{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-3 rounded-xl",children:r?"Sipariş Oluşturuluyor...":"Siparişi Tamamla"})]})]})})]})]})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.ShoppingCart,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sepetiniz Boş"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Sipariş vermek için önce ürün ekleyin"}),(0,b.jsx)(o.default,{href:"/",children:(0,b.jsxs)(e.Button,{className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Alışverişe Devam Et"]})})]})})}}];

//# sourceMappingURL=src_app_checkout_page_tsx_3300a33b._.js.map